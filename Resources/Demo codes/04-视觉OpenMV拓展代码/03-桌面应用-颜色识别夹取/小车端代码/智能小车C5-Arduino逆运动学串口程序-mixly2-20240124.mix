<xml version="Mixly 2.0 rc3" board="Arduino AVR@Arduino/Genuino Uno"><block type="base_setup" id="2/{$rGITD^IvOqk/`-fy" x="901" y="-2425"><comment pinned="false" h="80" w="160">循迹 S1\n超声波 S3</comment><statement name="DO"><block type="ZLKPZAR_KMS_INIT" id="]=+.rVh-r0.LitfTwH~#"><value name="L0"><shadow type="math_number" id="Iy$^9SLj#gF(YM?ydefy"><field name="NUM">159</field></shadow></value><value name="L1"><shadow type="math_number" id="3{B?N$rN`x63u@3[c(),"><field name="NUM">105</field></shadow></value><value name="L2"><shadow type="math_number" id="B.f+-=](=MYi5~?W1:eg"><field name="NUM">75</field></shadow></value><value name="L3"><shadow type="math_number" id="Nq720HF=Hz|RI,KluG|t"><field name="NUM">185</field></shadow></value><next><block type="ZLKPZAR_SETUP" id="5tOK!htuCv~7*N)4i~aI"><next><block type="serial_begin" id="m1uj{l-bfLQU/?s}u@O+"><field name="serial_select">Serial</field><value name="CONTENT"><shadow type="math_number" id="6;0Xp8EXGja$d[?cFp`J"><field name="NUM">115200</field></shadow></value><next><block type="ZLKPZAR_BEEP_TIMES" id="MSx9Y6GdX.u@~)=C3)39"><value name="times"><shadow type="math_number" id="_*]:NxOU.b9M./U[~XF}"><field name="NUM">3</field></shadow></value><value name="delay"><shadow type="math_number" id="3t7FJOD-x4avPRXWUU[-"><field name="NUM">100</field></shadow></value><next><block type="controls_delay" id="!#pyn_@G8WJ`V5(a`T;x"><field name="UNIT">delay</field><value name="DELAY_TIME"><shadow type="math_number" id="+1Z0#Y{wS!s8nnKk2`3a"><field name="NUM">500</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="(=a{T7Zg(cS4MzB#+XF;" x="1711" y="-2418"><field name="NAME">AI_parse_cmd</field><comment pinned="false" h="80" w="160">处理串口接收的数据</comment><statement name="STACK"><block type="controls_if" id="pGGyQ~Z7}}ZovH#,YFQZ"><value name="IF0"><block type="text_length" id="9zFwi+[(}}?T9^:K?l}N"><value name="VAR"><shadow type="text"><field name="TEXT">hello</field></shadow><block type="ZLKPZAR_UART_GET" id="Oyo0k[;q,Nee+7Gu5M`3"></block></value></block></value><statement name="DO0"><block type="ZLKPZAR_UART_CLEAR" id="Il9EyF~2Zt3gpyk,]Ro`"></block></statement></block></statement></block><block type="ZLKPZAR_START2" id="|)kF3dmg/n,$8St+F|9r" x="903" y="-2111"><statement name="DO"><block type="ZLKPZAR_LOOP" id="!G]/]VGIPP:N~VvZTIcY"><next><block type="procedures_callnoreturn" id="5hKHdf}E4Rx/$F_+Y{R?"><mutation name="AI_parse_cmd"></mutation></block></next></block></statement></block></xml><code>I2RlZmluZSBwaSAzLjE0MTU5MjYKdHlwZWRlZiBzdHJ1Y3QgewoJZmxvYXQgTDA7CglmbG9hdCBMMTsKCWZsb2F0IEwyOwoJZmxvYXQgTDM7CgoJZmxvYXQgc2Vydm9fYW5nbGVbNl07CS8vMOWPt+WIsDTlj7foiLXmnLrnmoTop5LluqYKCWZsb2F0IHNlcnZvX3JhbmdlWzZdOwkvL+iIteacuuinkuW6puiMg+WbtAoJaW50IHNlcnZvX3B3bVs2XTsJCS8vMOWPt+WIsDTlj7foiLXmnLrnmoTop5LluqYKfWtpbmVtYXRpY3NfdDsKa2luZW1hdGljc190IGtpbmVtYXRpY3M7CnZvaWQgc2V0dXBfa2luZW1hdGljcyhmbG9hdCBMMCwgZmxvYXQgTDEsIGZsb2F0IEwyLCBmbG9hdCBMMywga2luZW1hdGljc190ICpraW5lbWF0aWNzKSB7CgkvL+aUvuWkpzEw5YCNCglraW5lbWF0aWNzLT5MMCA9IEwwKjEwOwoJa2luZW1hdGljcy0+TDEgPSBMMSoxMDsKCWtpbmVtYXRpY3MtPkwyID0gTDIqMTA7CglraW5lbWF0aWNzLT5MMyA9IEwzKjEwOwp9CgppbnQga2luZW1hdGljc19hbmFseXNpcyhmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCB6LCBmbG9hdCBBbHBoYSwga2luZW1hdGljc190ICpraW5lbWF0aWNzKSB7CglmbG9hdCB0aGV0YTMsIHRoZXRhNCwgdGhldGE1LCB0aGV0YTY7CglmbG9hdCBsMCwgbDEsIGwyLCBsMzsKCWZsb2F0IGFhYSwgYmJiLCBjY2MsIHpmX2ZsYWc7CgoJLy/mlL7lpKcxMOWAjQoJeCA9IHgqMTA7Cgl5ID0geSoxMDsKCXogPSB6KjEwOwoKCWwwID0ga2luZW1hdGljcy0+TDA7CglsMSA9IGtpbmVtYXRpY3MtPkwxOwoJbDIgPSBraW5lbWF0aWNzLT5MMjsKCWwzID0ga2luZW1hdGljcy0+TDM7CgoJaWYoeCA9PSAwKSB7CgkJdGhldGE2ID0gMC4wOwoJfSBlbHNlIHsKCQl0aGV0YTYgPSBhdGFuKHgveSkqMTgwLjAvcGk7Cgl9CgoJeSA9IHNxcnQoeCp4ICsgeSp5KTsvL3ggeSDmlpzovrkKCXkgPSB5LWwzICogY29zKEFscGhhKnBpLzE4MC4wKTsKCXogPSB6LWwwLWwzKnNpbihBbHBoYSpwaS8xODAuMCk7CglpZih6IDwgLWwwKSB7CgkJcmV0dXJuIDE7Cgl9CglpZihzcXJ0KHkqeSArIHoqeikgPiAobDErbDIpKSB7CgkJcmV0dXJuIDI7Cgl9CgoJY2NjID0gYWNvcyh5IC8gc3FydCh5ICogeSArIHogKiB6KSk7CgliYmIgPSAoeSp5K3oqeitsMSpsMS1sMipsMikvKDIqbDEqc3FydCh5Knkreip6KSk7CglpZihiYmIgPiAxIHx8IGJiYiA8IC0xKSB7CgkJcmV0dXJuIDM7Cgl9CglpZiAoeiA8IDApIHsKCQl6Zl9mbGFnID0gLTE7Cgl9IGVsc2UgewoJCXpmX2ZsYWcgPSAxOwoJfQoJdGhldGE1ID0gY2NjICogemZfZmxhZyArIGFjb3MoYmJiKTsKCXRoZXRhNSA9IHRoZXRhNSAqIDE4MC4wIC8gcGk7CglpZih0aGV0YTUgPiAxODAuMCB8fCB0aGV0YTUgPCAwLjApIHsKCQlyZXR1cm4gNDsKCX0KCglhYWEgPSAtKHkqeSt6KnotbDEqbDEtbDIqbDIpLygyKmwxKmwyKTsKCWlmIChhYWEgPiAxIHx8IGFhYSA8IC0xKSB7CgkJcmV0dXJuIDU7Cgl9Cgl0aGV0YTQgPSBhY29zKGFhYSk7Cgl0aGV0YTQgPSAxODAuMCAtIHRoZXRhNCAqIDE4MC4wIC8gcGkgOwoJaWYgKHRoZXRhNCA+IDEzNS4wIHx8IHRoZXRhNCA8IC0xMzUuMCkgewoJCXJldHVybiA2OwoJfQoKCXRoZXRhMyA9IEFscGhhIC0gdGhldGE1ICsgdGhldGE0OwoJaWYodGhldGEzID4gOTAuMCB8fCB0aGV0YTMgPCAtOTAuMCkgewoJCXJldHVybiA3OwoJfQoKCWtpbmVtYXRpY3MtPnNlcnZvX2FuZ2xlWzBdID0gdGhldGE2OwoJa2luZW1hdGljcy0+c2Vydm9fYW5nbGVbMV0gPSB0aGV0YTUtOTA7CglraW5lbWF0aWNzLT5zZXJ2b19hbmdsZVsyXSA9IHRoZXRhNDsKCWtpbmVtYXRpY3MtPnNlcnZvX2FuZ2xlWzNdID0gdGhldGEzOwoKCWtpbmVtYXRpY3MtPnNlcnZvX3B3bVswXSA9IChpbnQpKDE1MDAtMjAwMC4wICoga2luZW1hdGljcy0+c2Vydm9fYW5nbGVbMF0gLyAyNzAuMCk7CglraW5lbWF0aWNzLT5zZXJ2b19wd21bMV0gPSAoaW50KSgxNTAwKzIwMDAuMCAqIGtpbmVtYXRpY3MtPnNlcnZvX2FuZ2xlWzFdIC8gMjcwLjApOwoJa2luZW1hdGljcy0+c2Vydm9fcHdtWzJdID0gKGludCkoMTUwMCsyMDAwLjAgKiBraW5lbWF0aWNzLT5zZXJ2b19hbmdsZVsyXSAvIDI3MC4wKTsKCWtpbmVtYXRpY3MtPnNlcnZvX3B3bVszXSA9IChpbnQpKDE1MDArMjAwMC4wICoga2luZW1hdGljcy0+c2Vydm9fYW5nbGVbM10gLyAyNzAuMCk7CgoJcmV0dXJuIDA7Cn0KaW50IGtpbmVtYXRpY3NfbW92ZShmbG9hdCB4LCBmbG9hdCB5LCBmbG9hdCB6LCBpbnQgbXRpbWUpIHsKCglpbnQgaSxqLCBtbWluID0gMCwgZmxhZyA9IDA7CgoJaWYoeSA8IDApcmV0dXJuIDA7CgkvL+Wvu+aJvuacgOS9s+inkuW6pgoJZmxhZyA9IDA7Cglmb3IoaT0wO2k+PS0xMzU7aS0tKSB7CgkJaWYoMCA9PSBraW5lbWF0aWNzX2FuYWx5c2lzKHgseSx6LGksJmtpbmVtYXRpY3MpKXsKCQkJaWYoaTxtbWluKW1taW4gPSBpOwoJCQlmbGFnID0gMTsKCQl9Cgl9CgoJLy/nlKgz5Y+36Ii15py65LiO5rC05bmz5pyA5aSn55qE5aS56KeS5L2c5Li65pyA5L2z5YC8CglpZihmbGFnKSB7CgkJa2luZW1hdGljc19hbmFseXNpcyh4LHkseixtbWluLCZraW5lbWF0aWNzKTsKCQlmb3Ioaj0wO2o8NDtqKyspIHsKCQkJc2V0X3NlcnZvKGosIGtpbmVtYXRpY3Muc2Vydm9fcHdtW2pdLCBtdGltZSk7CgkJfQoJCXJldHVybiAxOwoJfQoKCXJldHVybiAwOwp9CgojaW5jbHVkZSA8U2Vydm8uaD4gICAgICAgICAgLy/lo7DmmI7osIPnlKhTZXJ2by5o5bqTCiNpbmNsdWRlIDx3aW5ib25kZmxhc2guaD4gIC8vZmxhc2josIPnlKjnmoTlupMKCiNkZWZpbmUgQUNUSU9OX1NJWkUgNTEyCiNkZWZpbmUgUkVDVl9TSVpFIDE2OAojZGVmaW5lIElORk9fQUREUl9TQVZFX1NUUiAgICgoKDg8PDEwKS00KTw8MTApIC8vKDgqMTAyNC00KSoxMDI0ICAgIC8vZWVwcm9tX2luZm/nu5PmnoTkvZPlrZjlgqjnmoTkvY3nva4KI2RlZmluZSBCSUFTX0FERFJfVkVSSUZZICAwIC8v5YGP5beu5a2Y5YKo55qE5Zyw5Z2ACiNkZWZpbmUgRkxBR19WRVJJRlkgMHgzOAoKI2RlZmluZSAgUElOX25sZWQgICAxMyAgICAgICAgICAgICAgLy/lro/lrprkuYnlt6XkvZzmjIfnpLrnga/lvJXohJoKI2RlZmluZSAgUElOX2JlZXAgICA0ICAgICAgICAgICAgICAgLy/onILpuKPlmajlvJXohJrlrprkuYkKCiNkZWZpbmUgbmxlZF9vbigpIHtkaWdpdGFsV3JpdGUoUElOX25sZWQsIExPVyk7fQojZGVmaW5lIG5sZWRfb2ZmKCkge2RpZ2l0YWxXcml0ZShQSU5fbmxlZCwgSElHSCk7fQoKI2RlZmluZSBiZWVwX29uKCkge2RpZ2l0YWxXcml0ZShQSU5fYmVlcCwgSElHSCk7fQojZGVmaW5lIGJlZXBfb2ZmKCkge2RpZ2l0YWxXcml0ZShQSU5fYmVlcCwgTE9XKTt9CgojZGVmaW5lIFBSRV9DTURfU0laRSAzMgojZGVmaW5lIFNFUlZPX05VTSA2CiNkZWZpbmUgU0VSVk9fVElNRV9QRVJJT0QgICAgMjAgICAgLy/mr4/pmpQyMG1z5aSE55CG5LiA5qyh77yI57Sv5Yqg77yJ6Ii15py655qEUFdN5aKe6YePCgp0eXBlZGVmIHN0cnVjdCB7CiAgbG9uZyBteXZlcnNpb247CiAgbG9uZyBkal9yZWNvcmRfbnVtOwogIGJ5dGUgcHJlX2NtZFtQUkVfQ01EX1NJWkUrMV07CiAgaW50ICBkal9iaWFzX3B3bVtTRVJWT19OVU0rMV07Cn1lZXByb21faW5mb190OwplZXByb21faW5mb190IGVlcHJvbV9pbmZvOwoKU2Vydm8gbXlzZXJ2b1tTRVJWT19OVU1dOyAgICAgICAgIC8v5Yib5bu65LiA5Liq6Ii15py657G7CmNoYXIgYnVmZmVyW1JFQ1ZfU0laRV07ICAgICAgICAgICAgICAgICAvLyDlrprkuYnkuIDkuKrmlbDnu4TnlKjmnaXlrZjlgqjmr4/lsI/nu4TliqjkvZznu4QKYnl0ZSB1YXJ0X3JlY2VpdmVfYnVmW1JFQ1ZfU0laRV07CmJ5dGUgc2Vydm9fcGluW1NFUlZPX05VTV0gPSB7NywgMywgNSwgNiwgOSAsOH07IC8v5a6P5a6a5LmJ6Ii15py65o6n5Yi25byV6ISaClN0cmluZyB1YXJ0X3JlY2VpdmVfc3RyID0gIiI7ICAgIC8v5aOw5piO5LiA5Liq5a2X56ym5Liy5pWw57uEClN0cmluZyB1YXJ0X3JlY2VpdmVfc3RyX2JhayA9ICIiOyAgICAvL+WjsOaYjuS4gOS4quWtl+espuS4suaVsOe7hApieXRlIHVhcnQxX2dldF9vayA9IDAsIHVhcnQxX21vZGU9MDsKY2hhciBjbWRfcmV0dXJuWzY0XTsKaW50IHVhcnRfcmVjZWl2ZV9zdHJfbGVuOwppbnQgenhfcmVhZF9pZCA9IDAsIHp4X3JlYWRfZmxhZyA9IDAsIHp4X3JlYWRfdmFsdWUgPSAwOwpieXRlIGZsYWdfc3luYz0wOwpib29sIGRvd25Mb2FkID0gZmFsc2U7CnUzMiBkb3duTG9hZFN5c3RpY2tNcz0wOwoKdHlwZWRlZiBzdHJ1Y3QgeyAgICAgICAgICAgICAgICAgIC8v6Ii15py657uT5p6E5L2T5Y+Y6YeP5aOw5piOCiAgICB1bnNpZ25lZCBpbnQgYWltID0gMTUwMDsgICAgICAvL+iIteacuuebruagh+WAvAogICAgZmxvYXQgY3VyID0gMTUwMC4wOyAgICAgICAgICAgLy/oiLXmnLrlvZPliY3lgLwKICAgIHVuc2lnbmVkICBpbnQgdGltZTEgPSAxMDAwOyAgIC8v6Ii15py65omn6KGM5pe26Ze0CiAgICBmbG9hdCBpbmM9IDAuMDsgICAgICAgICAgICAgICAvL+iIteacuuWAvOWinumHj++8jOS7pTIwbXPkuLrlkajmnJ8KfWR1b2ppX3N0cnVjdDsKZHVvamlfc3RydWN0IHNlcnZvX2RvW1NFUlZPX05VTV07ICAgICAgICAgICAvL+eUqOe7k+aehOS9k+WPmOmHj+WjsOaYjuS4gOS4quiIteacuuWPmOmHj+e7hAoKd2luYm9uZEZsYXNoU1BJIG1lbTsKaW50IGRvX3N0YXJ0X2luZGV4LCBkb190aW1lLCBncm91cF9udW1fc3RhcnQsIGdyb3VwX251bV9lbmQsIGdyb3VwX251bV90aW1lczsKY2hhciBncm91cF9kb19vayA9IDE7CmxvbmcgbG9uZyBhY3Rpb25fdGltZSA9IDA7CnZvaWQoKiByZXNldEZ1bmMpICh2b2lkKSA9IDA7IC8vZGVjbGFyZSByZXNldCBmdW5jdGlvbiBhdCBhZGRyZXNzIDAKCi8v5a+5IGEg5pWw6L+b6KGM5o6S5bqPCnZvaWQgc2VsZWN0aW9uX3NvcnQoaW50ICphLCBpbnQgbGVuKSB7CiAgICBpbnQgaSxqLG1pLHQ7CiAgICBmb3IoaT0wO2k8bGVuLTE7aSsrKSB7CiAgICAgICAgbWkgPSBpOwogICAgICAgIGZvcihqPWkrMTtqPGxlbjtqKyspIHsKICAgICAgICAgICAgaWYoYVttaV0gPiBhW2pdKSB7CiAgICAgICAgICAgICAgICBtaSA9IGo7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYobWkgIT0gaSkgewogICAgICAgICAgICB0ID0gYVttaV07CiAgICAgICAgICAgIGFbbWldID0gYVtpXTsKICAgICAgICAgICAgYVtpXSA9IHQ7CiAgICAgICAgfQogICAgfQp9CgovL+afpeivonN0cuaYr+WMheWQq3N0cjLvvIzlubbov5Tlm57mnIDlkI7kuIDkuKrlrZfnrKbmiYDlnKhzdHLnmoTkvY3nva4KdTE2IHN0cl9jb250YWluX3N0cih1OCAqc3RyLCB1OCAqc3RyMikgewogIHU4ICpzdHJfdGVtcCwgKnN0cl90ZW1wMjsKICBzdHJfdGVtcCA9IHN0cjsKICBzdHJfdGVtcDIgPSBzdHIyOwogIHdoaWxlKCpzdHJfdGVtcCkgewogICAgaWYoKnN0cl90ZW1wID09ICpzdHJfdGVtcDIpIHsKICAgICAgd2hpbGUoKnN0cl90ZW1wMikgewogICAgICAgIGlmKCpzdHJfdGVtcCsrICE9ICpzdHJfdGVtcDIrKykgewogICAgICAgICAgc3RyX3RlbXAgPSBzdHJfdGVtcCAtIChzdHJfdGVtcDItc3RyMikgKyAxOwogICAgICAgICAgc3RyX3RlbXAyID0gc3RyMjsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgICBpZighKnN0cl90ZW1wMikgewogICAgICAgIHJldHVybiAoc3RyX3RlbXAtc3RyKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgc3RyX3RlbXArKzsKICAgIH0KICB9CiAgcmV0dXJuIDA7Cn0KCi8v55S15py65o6n5Yi25Ye95pWwCnZvaWQgY2FyX3J1bihzaG9ydCBzcGVlZF9sZWZ0LCBzaG9ydCBzcGVlZF9yaWdodCkgewogICAgc3ByaW50ZihjbWRfcmV0dXJuLCAiIzAwNlAlMDRkVDAwMDAhIzAwN1AlMDRkVDAwMDAhIiwgMTUwMCtzcGVlZF9sZWZ0LCAxNTAwLXNwZWVkX3JpZ2h0KTsKICAgIFNlcmlhbC5wcmludGxuKChjaGFyICopY21kX3JldHVybik7CiAgICBzcHJpbnRmKGNtZF9yZXR1cm4sICIjMDA4UCUwNGRUMDAwMCEjMDA5UCUwNGRUMDAwMCEiLCAxNTAwK3NwZWVkX2xlZnQsIDE1MDAtc3BlZWRfcmlnaHQpOwogICAgU2VyaWFsLnByaW50bG4oKGNoYXIgKiljbWRfcmV0dXJuKTsKICAgIHNwcmludGYoY21kX3JldHVybiwgIiMwMDBQJTA0ZFQwMDAwISIsIDE1MDAtKHNwZWVkX2xlZnQtc3BlZWRfcmlnaHQpLzIpOwogICAgU2VyaWFsLnByaW50bG4oKGNoYXIgKiljbWRfcmV0dXJuKTsKfQoKLy9sZWTnga/liJ3lp4vljJYKdm9pZCBzZXR1cF9ubGVkKCkgewogICAgcGluTW9kZShQSU5fbmxlZCxPVVRQVVQpOyAvL+iuvue9ruW8leiEmuS4uui+k+WHuuaooeW8jwogICAgbmxlZF9vZmYoKTsKfQoKLy/onILpuKPlmajliJ3lp4vljJYKdm9pZCBzZXR1cF9iZWVwKCkgewogICAgcGluTW9kZShQSU5fYmVlcCxPVVRQVVQpOwogICAgYmVlcF9vZmYoKTsKfQoKLy/lrZjlgqjlmajliJ3lp4vljJYKdm9pZCBzZXR1cF93MjVxKCkgewoJcmVhZF9lZXByb20oKTsKCWlmKGVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtW1NFUlZPX05VTV0gIT0gRkxBR19WRVJJRlkpIHsKCQlmb3IoaW50IGk9MDtpPFNFUlZPX05VTTsgaSsrKSB7CgkJCWVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtW2ldID0gMDsKCQl9CgkJZWVwcm9tX2luZm8uZGpfYmlhc19wd21bU0VSVk9fTlVNXSA9IEZMQUdfVkVSSUZZOwoJfQp9CgovL+WFrei3r+iIteacuuWIneWni+WMlgp2b2lkIHNldHVwX3NlcnZvKCkgewogICAgLy/onLfnvKkgIntHMDAwMiMwMDBQMTUwMFQxNTAwISMwMDFQMjIwMFQxNTAwISMwMDJQMjUwMFQxNTAwISMwMDNQMjAwMFQxNTAwISMwMDRQMTUwMFQxNTAwISMwMDVQMTUwMFQxNTAwIX0iLAogICAgaWYoZWVwcm9tX2luZm8ucHJlX2NtZFtQUkVfQ01EX1NJWkVdICE9IEZMQUdfVkVSSUZZKSB7CiAgICAJc2Vydm9fZG9bMF0uYWltID0gc2Vydm9fZG9bMF0uY3VyID0gMTUwMCArIGVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtWzBdO3NlcnZvX2RvWzBdLmluYz0wOwogICAgCXNlcnZvX2RvWzFdLmFpbSA9IHNlcnZvX2RvWzFdLmN1ciA9IDE1MDAgKyBlZXByb21faW5mby5kal9iaWFzX3B3bVsxXTtzZXJ2b19kb1sxXS5pbmM9MDsKICAgIAlzZXJ2b19kb1syXS5haW0gPSBzZXJ2b19kb1syXS5jdXIgPSAxNTAwICsgZWVwcm9tX2luZm8uZGpfYmlhc19wd21bMl07c2Vydm9fZG9bMl0uaW5jPTA7CiAgICAJc2Vydm9fZG9bM10uYWltID0gc2Vydm9fZG9bM10uY3VyID0gMTUwMCArIGVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtWzNdO3NlcnZvX2RvWzNdLmluYz0wOwogICAgCXNlcnZvX2RvWzRdLmFpbSA9IHNlcnZvX2RvWzRdLmN1ciA9IDE1MDAgKyBlZXByb21faW5mby5kal9iaWFzX3B3bVs0XTtzZXJ2b19kb1s0XS5pbmM9MDsKICAgIAlzZXJ2b19kb1s1XS5haW0gPSBzZXJ2b19kb1s1XS5jdXIgPSAxNTAwICsgZWVwcm9tX2luZm8uZGpfYmlhc19wd21bNV07c2Vydm9fZG9bNV0uaW5jPTA7CiAgICB9CgogICAgZm9yKGJ5dGUgaSA9IDA7IGkgPCBTRVJWT19OVU07IGkgKyspewogICAgICAgIG15c2Vydm9baV0uYXR0YWNoKHNlcnZvX3BpbltpXSk7ICAgLy8g5bCGMTDlvJXohJrkuI7lo7DmmI7nmoToiLXmnLrlr7nosaHov57mjqXotbfmnaUKICAgICAgICBteXNlcnZvW2ldLndyaXRlTWljcm9zZWNvbmRzKHNlcnZvX2RvW2ldLmFpbSk7CiAgICB9Cn0KCi8v5ZCv5Yqo5o+Q56S6CnZvaWQgc2V0dXBfc3RhcnRfcHJlX2NtZCgpIHsKCWlmKGVlcHJvbV9pbmZvLnByZV9jbWRbUFJFX0NNRF9TSVpFXSA9PSBGTEFHX1ZFUklGWSkgewoJICAgICAgcGFyc2VfY21kKGVlcHJvbV9pbmZvLnByZV9jbWQpOwoJfQp9CgovL+WKn+iDveS7i+e7je+8mkxFROeBr+mXqueDge+8jOavj+enkumXqueDgeS4gOasoQp2b2lkIGxvb3BfbmxlZCgpIHsKICAgIHN0YXRpYyB1OCB2YWwgPSAwOwogICAgc3RhdGljIHVuc2lnbmVkIGxvbmcgc3lzdGlja19tc19iYWsgPSAwOwogICAgaWYobWlsbGlzKCkgLSBzeXN0aWNrX21zX2JhayA+IDUwMCkgewogICAgICBzeXN0aWNrX21zX2JhayA9IG1pbGxpcygpOwogICAgICBpZih2YWwpIHsKICAgICAgICBubGVkX29uKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmxlZF9vZmYoKTsKICAgICAgfQogICAgICB2YWwgPSAhdmFsOwogICAgfQp9CgovL+iIteaculBXTeWinumHj+WkhOeQhuWHveaVsO+8jOavj+malFNFUlZPX1RJTUVfUEVSSU9E5q+r56eS5aSE55CG5LiA5qyh77yM6L+Z5qC35bCx5a6e546w5LqG6Ii15py655qE6L+e57ut5o6n5Yi2CnZvaWQgbG9vcF9zZXJ2bygpIHsKICBzdGF0aWMgYnl0ZSBzZXJ2b19tb25pdG9yW1NFUlZPX05VTV0gPSB7MH07CiAgc3RhdGljIGxvbmcgbG9uZyBzeXN0aWNrX21zX2JhayA9IDA7CiAgaWYobWlsbGlzKCkgLSBzeXN0aWNrX21zX2JhayA+IFNFUlZPX1RJTUVfUEVSSU9EKSB7CiAgICAgIHN5c3RpY2tfbXNfYmFrID0gbWlsbGlzKCk7CiAgICAgIGZvcihieXRlIGk9MDsgaTxTRVJWT19OVU07IGkrKykgewogICAgICAgICAgaWYoc2Vydm9fZG9baV0uaW5jKSB7CiAgICAgICAgICAgICAgaWYoYWJzKCBzZXJ2b19kb1tpXS5haW0gLSBzZXJ2b19kb1tpXS5jdXIpIDw9IGFicyAoc2Vydm9fZG9baV0uaW5jKSApIHsKICAgICAgICAgICAgICAgICAgIG15c2Vydm9baV0ud3JpdGVNaWNyb3NlY29uZHMoc2Vydm9fZG9baV0uYWltKTsKICAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2ldLmN1ciA9IHNlcnZvX2RvW2ldLmFpbTsKICAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2ldLmluYyA9IDA7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgc2Vydm9fZG9baV0uY3VyICs9ICBzZXJ2b19kb1tpXS5pbmM7CiAgICAgICAgICAgICAgICAgICAgIG15c2Vydm9baV0ud3JpdGVNaWNyb3NlY29uZHMoKGludClzZXJ2b19kb1tpXS5jdXIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB9CiAgICAgIH0KICB9Cn0KCi8v6Kej5p6Q5Liy5Y+j5o6l5pS25Yiw55qE5a2X56ym5Liy5oyH5LukCnZvaWQgbG9vcF91YXJ0KCl7CiAgICBpZih1YXJ0MV9nZXRfb2spIHsKICAgIAkgIC8v5aaC5p6c5pyJ5ZCM5q2l5qCH5b+X55u05o6l6L+U5Zue77yM6K6p5ZCM5q2l5Ye95pWw5aSE55CGCiAgICAgICAgaWYoZmxhZ19zeW5jKXJldHVybjsKICAgICAgICAvL+aJk+WNsOWtl+espuS4su+8jOa1i+ivleeahOaXtuWAmeWPr+S7peeUqAogICAgICAgIC8v6L2s5o2i5oiQ5a2X56ym5Liy5pWw57uECiAgICAgICAgdWFydF9yZWNlaXZlX3N0ci50b0NoYXJBcnJheSh1YXJ0X3JlY2VpdmVfYnVmLCB1YXJ0X3JlY2VpdmVfc3RyLmxlbmd0aCgpKzEpOwogICAgICAgIHVhcnRfcmVjZWl2ZV9zdHJfbGVuID0gdWFydF9yZWNlaXZlX3N0ci5sZW5ndGgoKTsKICAgICAgICBpZih1YXJ0MV9tb2RlID09IDEpIHsKICAgICAgICAgICAgcGFyc2VfY21kKHVhcnRfcmVjZWl2ZV9idWYpOwogICAgICAgIH0gZWxzZSBpZih1YXJ0MV9tb2RlID09IDIgfHwgdWFydDFfbW9kZSA9PSAzKXsKICAgICAgICAgICAgcGFyc2VfYWN0aW9uKHVhcnRfcmVjZWl2ZV9idWYpOwogICAgICAgIH0gZWxzZSBpZih1YXJ0MV9tb2RlID09IDQpewogICAgICAgICAgICBzYXZlX2FjdGlvbih1YXJ0X3JlY2VpdmVfYnVmKTsKICAgICAgICB9CiAgICAgICAgdWFydDFfZ2V0X29rID0gMDsKICAgICAgICB1YXJ0MV9tb2RlID0gMDsKICAgICAgICB1YXJ0X3JlY2VpdmVfc3RyID0gIiI7CiAgICB9CiAgICBpZihtaWxsaXMoKS1kb3duTG9hZFN5c3RpY2tNcz4zMDAwKSB7CiAgICAJZG93bkxvYWQgPSBmYWxzZTsKICAgIH0KfQoKLy/ojrflj5bmnIDlpKfml7bpl7QKaW50IGdldE1heFRpbWUoY2hhciAqc3RyKSB7CiAgIGludCBpID0gMCwgbWF4X3RpbWUgPSAwLCB0bXBfdGltZSA9IDA7CiAgIHdoaWxlKHN0cltpXSkgewogICAgICBpZihzdHJbaV0gPT0gJ1QnKSB7CiAgICAgICAgICB0bXBfdGltZSA9IChzdHJbaSsxXS0nMCcpKjEwMDAgKyAoc3RyW2krMl0tJzAnKSoxMDAgKyAoc3RyW2krM10tJzAnKSoxMCArIChzdHJbaSs0XS0nMCcpOwogICAgICAgICAgaWYodG1wX3RpbWU+bWF4X3RpbWUpbWF4X3RpbWUgPSB0bXBfdGltZTsKICAgICAgICAgIGkgPSBpKzQ7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpKys7CiAgIH0KICAgcmV0dXJuIG1heF90aW1lOwp9CgovL+aKimVlcHJvbV9pbmZv5YaZ5YWl5YiwVzI1UTY0X0lORk9fQUREUl9TQVZFX1NUUuS9jee9rgp2b2lkIHJlYWRfZWVwcm9tKHZvaWQpIHsKICAgIG1lbS5iZWdpbihfVzI1UTY0LFNQSSxTUyk7CiAgICBtZW0ucmVhZCggSU5GT19BRERSX1NBVkVfU1RSLCAoY2hhciAqKSgmZWVwcm9tX2luZm8pLCBzaXplb2YoZWVwcm9tX2luZm9fdCkpOwogICAgbWVtLmVuZCgpOwp9CgovL+aKimVlcHJvbV9pbmZv5YaZ5YWl5YiwSU5GT19BRERSX1NBVkVfU1RS5L2N572uCnZvaWQgcmV3cml0ZV9lZXByb20odm9pZCkgewogICAgbWVtLmJlZ2luKF9XMjVRNjQsU1BJLFNTKTsKICAgIG1lbS5lcmFzZVNlY3RvcihJTkZPX0FERFJfU0FWRV9TVFIpOwogICAgbWVtLndyaXRlKCBJTkZPX0FERFJfU0FWRV9TVFIsIChjaGFyICopKCZlZXByb21faW5mbyksIHNpemVvZihlZXByb21faW5mb190KSk7CiAgICBtZW0uZW5kKCk7Cn0KCi8v5a2Y5YKo5Yqo5L2c57uECnZvaWQgc2F2ZV9hY3Rpb24oY2hhciAqc3RyKSB7CiAgbG9uZyBsb25nIGFjdGlvbl9pbmRleCA9IDAsIG1heF90aW1lOwogIC8v6aKE5a2Y5ZG95Luk5aSE55CGCiAgaWYoc3RyWzFdID09ICckJyAmJiBzdHJbMl0gPT0gJyEnKSB7CiAgICBlZXByb21faW5mby5wcmVfY21kW1BSRV9DTURfU0laRV0gPSAwOwogICAgcmV3cml0ZV9lZXByb20oKTsKICAgIFNlcmlhbC5wcmludGxuKCJAQ0xFQVIgUFJFX0NNRCBPSyEiKTsKICAgIHJldHVybjsKICB9IGVsc2UgaWYoc3RyWzFdID09ICckJykgewogICAgbWVtc2V0KGVlcHJvbV9pbmZvLnByZV9jbWQsIDAsIHNpemVvZihlZXByb21faW5mby5wcmVfY21kKSk7CiAgICBzdHJjcHkoKGNoYXIgKillZXByb21faW5mby5wcmVfY21kLCAoY2hhciAqKXN0cisxKTsKICAgIGVlcHJvbV9pbmZvLnByZV9jbWRbc3RybGVuKChjaGFyICopc3RyKSAtIDJdID0gJ1wwJzsKICAgIGVlcHJvbV9pbmZvLnByZV9jbWRbUFJFX0NNRF9TSVpFXSA9IEZMQUdfVkVSSUZZOwogICAgcmV3cml0ZV9lZXByb20oKTsKICAgIFNlcmlhbC5wcmludGxuKCJAU0VUIFBSRV9DTUQgT0shIik7CiAgICBTZXJpYWwucHJpbnRsbigoY2hhciAqKWVlcHJvbV9pbmZvLnByZV9jbWQpOwogICAgcmV0dXJuOwogIH0KICAvLzxHMDAwMCMwMDBQMTUwMFQxMDAwIT4KICBpZigoc3RyWzFdID09ICdHJykgJiYgKHN0cls2XSA9PSAnIycpKSB7CiAgICAgIGFjdGlvbl9pbmRleCA9IChzdHJbMl0tJzAnKSoxMDAwICsgKHN0clszXS0nMCcpKjEwMCArIChzdHJbNF0tJzAnKSoxMCArIChzdHJbNV0tJzAnKSA7CiAgICAgIGlmKGFjdGlvbl9pbmRleDwxMDAwMCkgewogICAgICAgIHN0clswXSA9ICd7JzsKICAgICAgICBzdHJbdWFydF9yZWNlaXZlX3N0cl9sZW4tMV0gPSAnfSc7CiAgICAgICAgbWF4X3RpbWUgPSBnZXRNYXhUaW1lKHN0cik7CiAgICAgICAgdWFydF9yZWNlaXZlX3N0cl9sZW4gPSB1YXJ0X3JlY2VpdmVfc3RyX2xlbis0OwogICAgICAgIHN0clt1YXJ0X3JlY2VpdmVfc3RyX2xlbi00XSA9IG1heF90aW1lLzEwMDAgKyAnMCc7CiAgICAgICAgc3RyW3VhcnRfcmVjZWl2ZV9zdHJfbGVuLTNdID0gbWF4X3RpbWUlMTAwMC8xMDAgKyAnMCc7CiAgICAgICAgc3RyW3VhcnRfcmVjZWl2ZV9zdHJfbGVuLTJdID0gbWF4X3RpbWUlMTAwLzEwICsgJzAnOwogICAgICAgIHN0clt1YXJ0X3JlY2VpdmVfc3RyX2xlbi0xXSA9IG1heF90aW1lJTEwICsgJzAnOwogICAgICAgIHN0clt1YXJ0X3JlY2VpdmVfc3RyX2xlbl0gPSAnXDAnOwogICAgICAgIG1lbS5iZWdpbihfVzI1UTY0LFNQSSxTUyk7CiAgICAgICAgaWYoKGFjdGlvbl9pbmRleCpBQ1RJT05fU0laRSAlIDQwOTYpID09IDApewogICAgICAgICAgICBtZW0uZXJhc2VTZWN0b3IoYWN0aW9uX2luZGV4KkFDVElPTl9TSVpFKTsJZGVsYXkoNSk7CiAgICAgICAgfQogICAgICAgIGlmKHVhcnRfcmVjZWl2ZV9zdHJfbGVuPDI1NikgewogICAgICAgICAgICBtZW0ud3JpdGUoKGxvbmcgbG9uZylhY3Rpb25faW5kZXgqQUNUSU9OX1NJWkUsIHN0ciwgdWFydF9yZWNlaXZlX3N0cl9sZW4pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1lbS53cml0ZSgobG9uZyBsb25nKWFjdGlvbl9pbmRleCpBQ1RJT05fU0laRSwgc3RyLCAyNTYpOwogICAgICAgIAkgIGRlbGF5KDUpOwogICAgICAgICAgICBtZW0ud3JpdGUoKGxvbmcgbG9uZylhY3Rpb25faW5kZXgqQUNUSU9OX1NJWkUrMjU2LCBzdHIrMjU2LCB1YXJ0X3JlY2VpdmVfc3RyX2xlbi0yNTYpOwogICAgICAgIH0KICAgICAgICBtZW0uZW5kKCk7CiAgICAgICAgLy/ov5Tlm57lj5HpgIHmjqXmlLbmiJDlip8KICAgICAgICBkZWxheSgzMCk7CiAgICAgICAgU2VyaWFsLnByaW50bG4oIkEiKTsKICAgICAgfQogIH0KfQoKLy/op6PmnpDkuLLlj6PliqjkvZwKdm9pZCBwYXJzZV9hY3Rpb24odTggKnVhcnRfcmVjZWl2ZV9idWYpIHsKICAgIHN0YXRpYyB1bnNpZ25lZCBpbnQgaW5kZXgsIHRpbWUxLCBwd20xLCBwd20yLCBpLCBsZW47Ly/lo7DmmI7kuInkuKrlj5jph4/liIbliKvnlKjmnaXlrZjlgqjop6PmnpDlkI7nmoToiLXmnLrluo/lj7fvvIzoiLXmnLrmiafooYzml7bpl7TvvIzoiLXmnLpQV00KICAgIGlmKCh1YXJ0X3JlY2VpdmVfYnVmWzBdID09ICcjJykgJiYgKHVhcnRfcmVjZWl2ZV9idWZbNF0gPT0gJ1AnKSAmJiAodWFydF9yZWNlaXZlX2J1Zls1XSA9PSAnIScpKSB7CiAgICAgICAgZGVsYXkoNTAwKTsKICAgIH0KICAgIFNlcmlhbC5wcmludGxuKChjaGFyICopdWFydF9yZWNlaXZlX2J1Zik7CiAgICBpZih6eF9yZWFkX2ZsYWcpIHsKICAJICAvLyMwMDFQMTUwMCEg5Zue6K+75aSE55CGCiAgCSAgaWYoKHVhcnRfcmVjZWl2ZV9idWZbMF0gPT0gJyMnKSAmJiAodWFydF9yZWNlaXZlX2J1Zls0XSA9PSAnUCcpICYmICh1YXJ0X3JlY2VpdmVfYnVmWzldID09ICchJykpIHsKICAgIAkgICAgaW5kZXggPSAodWFydF9yZWNlaXZlX2J1ZlsxXS0nMCcpKjEwMCArICAodWFydF9yZWNlaXZlX2J1ZlsyXS0nMCcpKjEwICsgICh1YXJ0X3JlY2VpdmVfYnVmWzNdLScwJyk7CgkJCSAgaWYoaW5kZXggPT0genhfcmVhZF9pZCkgewogCQkJCSAgenhfcmVhZF9mbGFnID0gMDsKICAgICAgCQkgIHp4X3JlYWRfdmFsdWUgPSAodWFydF9yZWNlaXZlX2J1Zls1XS0nMCcpKjEwMDAgKyAodWFydF9yZWNlaXZlX2J1Zls2XS0nMCcpKjEwMCArICAodWFydF9yZWNlaXZlX2J1Zls3XS0nMCcpKjEwICsgICh1YXJ0X3JlY2VpdmVfYnVmWzhdLScwJyk7CgkJCSAgfQoJCX0KICAgIC8vIzAwMVBTQ0srMTAwISDlgY/lt67lpITnkIYKICAgIH0gZWxzZSBpZigodWFydF9yZWNlaXZlX2J1ZlswXSA9PSAnIycpICYmICh1YXJ0X3JlY2VpdmVfYnVmWzRdID09ICdQJykgJiYgKHVhcnRfcmVjZWl2ZV9idWZbNV0gPT0gJ1MnKSAmJiAodWFydF9yZWNlaXZlX2J1Zls2XSA9PSAnQycpICYmICh1YXJ0X3JlY2VpdmVfYnVmWzddID09ICdLJykpIHsKICAgICAgICBpbmRleCA9ICh1YXJ0X3JlY2VpdmVfYnVmWzFdLScwJykqMTAwICsgICh1YXJ0X3JlY2VpdmVfYnVmWzJdLScwJykqMTAgKyAgKHVhcnRfcmVjZWl2ZV9idWZbM10tJzAnKTsKICAgICAgICBpZihpbmRleCA8IFNFUlZPX05VTSkgewogICAgICAgICAgICBpbnQgYmlhc190bXAgPSAodWFydF9yZWNlaXZlX2J1Zls5XS0nMCcpKjEwMCArICAodWFydF9yZWNlaXZlX2J1ZlsxMF0tJzAnKSoxMCArICAodWFydF9yZWNlaXZlX2J1ZlsxMV0tJzAnKTsKICAgICAgICAgICAgaWYoYmlhc190bXAgPCAxMjcpIHsKICAgICAgICAgICAgbXlzZXJ2b1tpbmRleF0uYXR0YWNoKHNlcnZvX3BpbltpbmRleF0pOwogICAgICAgICAgICAgIGlmKHVhcnRfcmVjZWl2ZV9idWZbOF0gPT0gJysnKSB7CiAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2luZGV4XS5jdXIgPSBzZXJ2b19kb1tpbmRleF0uY3VyLWVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtW2luZGV4XStiaWFzX3RtcDsKICAgICAgICAgICAgICAgICAgZWVwcm9tX2luZm8uZGpfYmlhc19wd21baW5kZXhdID0gYmlhc190bXA7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHVhcnRfcmVjZWl2ZV9idWZbOF0gPT0gJy0nKSB7CiAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2luZGV4XS5jdXIgPSBzZXJ2b19kb1tpbmRleF0uY3VyLWVlcHJvbV9pbmZvLmRqX2JpYXNfcHdtW2luZGV4XS1iaWFzX3RtcDsKICAgICAgICAgICAgICAgICAgZWVwcm9tX2luZm8uZGpfYmlhc19wd21baW5kZXhdID0gLWJpYXNfdG1wOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXdyaXRlX2VlcHJvbSgpOwoJCQkJc2Vydm9fZG9baW5kZXhdLmN1ciA9IDE1MDA7CgkJCQlzZXJ2b19kb1tpbmRleF0uYWltID0gMTUwMCtlZXByb21faW5mby5kal9iaWFzX3B3bVtpbmRleF07IC8v6Ii15py6UFdN6LWL5YC8LOWKoOS4iuWBj+W3rueahOWAvAoJCQkJc2Vydm9fZG9baW5kZXhdLnRpbWUxID0gMTAwOyAgICAgIC8v6Ii15py65omn6KGM5pe26Ze06LWL5YC8CgkJCQlzZXJ2b19kb1tpbmRleF0uaW5jID0gZWVwcm9tX2luZm8uZGpfYmlhc19wd21baW5kZXhdLzUuMDAwOyAvL+agueaNruaXtumXtOiuoeeul+iIteaculBXTeWinumHjwogICAgICAgICAgICAgIC8vU2VyaWFsLnByaW50KCJpbnB1dCBiaWFzOiIpOwogICAgICAgICAgICAgIC8vU2VyaWFsLnByaW50bG4oZWVwcm9tX2luZm8uZGpfYmlhc19wd21baW5kZXhdKTsKICAgICAgICAgICB9CiAgICAgICAgfQogICAgLy/lgZzmraLlpITnkIYKICAgIH0gZWxzZSBpZigodWFydF9yZWNlaXZlX2J1ZlswXSA9PSAnIycpICYmICh1YXJ0X3JlY2VpdmVfYnVmWzRdID09ICdQJykgJiYgKHVhcnRfcmVjZWl2ZV9idWZbNV0gPT0gJ0QnKSAmJiAodWFydF9yZWNlaXZlX2J1Zls2XSA9PSAnUycpICYmICh1YXJ0X3JlY2VpdmVfYnVmWzddID09ICdUJykpIHsKICAgICAgICBpbmRleCA9ICh1YXJ0X3JlY2VpdmVfYnVmWzFdLScwJykqMTAwICsgICh1YXJ0X3JlY2VpdmVfYnVmWzJdLScwJykqMTAgKyAgKHVhcnRfcmVjZWl2ZV9idWZbM10tJzAnKTsKICAgICAgICBpZihpbmRleCA8IFNFUlZPX05VTSkgewogICAgICAgICAgICAgIHNlcnZvX2RvW2luZGV4XS5pbmMgPSAgMC4wMDE7CiAgICAgICAgICAgICAgc2Vydm9fZG9baW5kZXhdLmFpbSA9IHNlcnZvX2RvW2luZGV4XS5jdXI7CiAgICAgICAgfQogICAgfSBlbHNlIGlmKCh1YXJ0X3JlY2VpdmVfYnVmWzBdID09ICcjJykgfHwgKHVhcnRfcmVjZWl2ZV9idWZbMF0gPT0gJ3snKSkgeyAgIC8v6Kej5p6Q5Lul4oCcI+KAneaIluiAheS7peKAnHvigJ3lvIDlpLTnmoTmjIfku6QKICAgICAgICBsZW4gPSBzdHJsZW4odWFydF9yZWNlaXZlX2J1Zik7ICAgICAvL+iOt+WPluS4suWPo+aOpeaUtuaVsOaNrueahOmVv+W6pgogICAgICAgIGluZGV4PTA7IHB3bTE9MDsgdGltZTE9MDsgICAgICAgICAgIC8vM+S4quWPguaVsOWIneWni+WMlgogICAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7ICAgICAgICAgIC8vCiAgICAgICAgICAgIGlmKHVhcnRfcmVjZWl2ZV9idWZbaV0gPT0gJyMnKSB7ICAgICAgICAvL+WIpOaWreaYr+WQpuS4uui1t+Wni+espuKAnCPigJ0KICAgICAgICAgICAgICAgIGkrKzsgICAgICAgICAgICAgICAgICAgICAgICAvL+S4i+S4gOS4quWtl+espgogICAgICAgICAgICAgICAgd2hpbGUoKHVhcnRfcmVjZWl2ZV9idWZbaV0gIT0gJ1AnKSAmJiAoaTxsZW4pKSB7ICAgICAvL+WIpOaWreaYr+WQpuS4uiPkuYvlkI5Q5LmL5YmN55qE5pWw5a2X5a2X56ymCiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCoxMCArICh1YXJ0X3JlY2VpdmVfYnVmW2ldIC0gJzAnKTsgIC8v6K6w5b2VUOS5i+WJjeeahOaVsOWtlwogICAgICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGktLTsgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Zug5Li65LiK6Z2iaeWkmuiHquWinuS4gOasoe+8jOaJgOS7peimgeWHj+WOuzHkuKoKICAgICAgICAgICAgfSBlbHNlIGlmKHVhcnRfcmVjZWl2ZV9idWZbaV0gPT0gJ1AnKSB7ICAgLy/mo4DmtYvmmK/lkKbkuLrigJxQ4oCdCiAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICB3aGlsZSgodWFydF9yZWNlaXZlX2J1ZltpXSAhPSAnVCcpICYmIChpPGxlbikpIHsgIC8v5qOA5rWLUOS5i+WQjlTkuYvliY3nmoTmlbDlrZflrZfnrKblubbkv53lrZgKICAgICAgICAgICAgICAgICAgICBwd20xID0gcHdtMSoxMCArICh1YXJ0X3JlY2VpdmVfYnVmW2ldIC0gJzAnKTsKICAgICAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgIH0gZWxzZSBpZih1YXJ0X3JlY2VpdmVfYnVmW2ldID09ICdUJykgeyAgLy/liKTmlq3mmK/lkKbkuLrigJxU4oCdCiAgICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgICB3aGlsZSgodWFydF9yZWNlaXZlX2J1ZltpXSAhPSAnIScpICYmIChpPGxlbikpIHsvL+ajgOa1i1TkuYvlkI4h5LmL5YmN55qE5pWw5a2X5a2X56ym5bm25L+d5a2YCiAgICAgICAgICAgICAgICAgICAgdGltZTEgPSB0aW1lMSoxMCArICh1YXJ0X3JlY2VpdmVfYnVmW2ldIC0gJzAnKTsgLy/lsIZU5ZCO6Z2i55qE5pWw5a2X5L+d5a2YCiAgICAgICAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYodGltZTE8U0VSVk9fVElNRV9QRVJJT0QpdGltZTE9U0VSVk9fVElNRV9QRVJJT0Q7Ly/lvojph43opoHvvIzpmLLmraLooqvpmaTmlbDkuLowCiAgICAgICAgICAgICAgICBpZigoaW5kZXggPT0gMjU1KSAmJiAocHdtMSA+PSA1MDApICYmIChwd20xIDw9IDI1MDApICYmICh0aW1lMTwxMDAwMCkpIHsgIC8v5aaC5p6c6Ii15py65Y+35ZKMUFdN5pWw5YC86LaF5Ye657qm5a6a5YC85YiZ6Lez5Ye65LiN5aSE55CGCgkJCQkJCWZvcihpbnQgaT0wO2k8U0VSVk9fTlVNO2krKykgewogICAgICAgICAgICAgICAgICAgIAkJcHdtMiA9IHB3bTErZWVwcm9tX2luZm8uZGpfYmlhc19wd21baV07CiAgICAgICAgICAgICAgICAgICAgCQlpZihwd20yID4gMjUwMClwd20yID0gMjUwMDsKICAgICAgICAgICAgICAgICAgICAJCWlmKHB3bTIgPCA1MDApcHdtMiA9IDUwMDsKICAgICAgICAgICAgICAgICAgICAJCXNlcnZvX2RvW2ldLmFpbSA9IHB3bTI7IC8v6Ii15py6UFdN6LWL5YC8LOWKoOS4iuWBj+W3rueahOWAvAogICAgICAgICAgICAgICAgICAgIAkJc2Vydm9fZG9baV0udGltZTEgPSB0aW1lMTsgICAgICAvL+iIteacuuaJp+ihjOaXtumXtOi1i+WAvAogICAgICAgICAgICAgICAgICAgIAkJZmxvYXQgcHdtX2VyciA9IHNlcnZvX2RvW2ldLmFpbSAtIHNlcnZvX2RvW2ldLmN1cjsKICAgICAgICAgICAgICAgICAgICAJCXNlcnZvX2RvW2ldLmluYyA9IChwd21fZXJyKjEuMDApLyh0aW1lMS9TRVJWT19USU1FX1BFUklPRCk7IC8v5qC55o2u5pe26Ze06K6h566X6Ii15py6UFdN5aKe6YePCgkJCQkJCX0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZigoaW5kZXggPj0gU0VSVk9fTlVNKSB8fCAocHdtMSA+IDI1MDApIHx8KHB3bTEgPCA1MDApfHwgKHRpbWUxPjEwMDAwKSkgeyAgLy/lpoLmnpzoiLXmnLrlj7flkoxQV03mlbDlgLzotoXlh7rnuqblrprlgLzliJnot7Plh7rkuI3lpITnkIYKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc2Vydm9fZG9baW5kZXhdLmFpbSA9IHB3bTErZWVwcm9tX2luZm8uZGpfYmlhc19wd21baW5kZXhdOzsgLy/oiLXmnLpQV03otYvlgLws5Yqg5LiK5YGP5beu55qE5YC8CiAgICAgICAgICAgICAgICAgICAgaWYoc2Vydm9fZG9baW5kZXhdLmFpbSA+IDI1MDApc2Vydm9fZG9baW5kZXhdLmFpbSA9IDI1MDA7CiAgICAgICAgICAgICAgICAgICAgaWYoc2Vydm9fZG9baW5kZXhdLmFpbSA8IDUwMClzZXJ2b19kb1tpbmRleF0uYWltID0gNTAwOwogICAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2luZGV4XS50aW1lMSA9IHRpbWUxOyAgICAgIC8v6Ii15py65omn6KGM5pe26Ze06LWL5YC8CiAgICAgICAgICAgICAgICAgICAgZmxvYXQgcHdtX2VyciA9IHNlcnZvX2RvW2luZGV4XS5haW0gLSBzZXJ2b19kb1tpbmRleF0uY3VyOwogICAgICAgICAgICAgICAgICAgIHNlcnZvX2RvW2luZGV4XS5pbmMgPSAocHdtX2VycioxLjAwKS8odGltZTEvU0VSVk9fVElNRV9QRVJJT0QpOyAvL+agueaNruaXtumXtOiuoeeul+iIteaculBXTeWinumHjwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaW5kZXggPSBwd20xID0gdGltZTEgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgovL+ino+aekOS4suWPo+aMh+S7pAp2b2lkIHBhcnNlX2NtZCh1OCAqdWFydF9yZWNlaXZlX2J1ZikgewogICAgc3RhdGljIHU4IGp4Yl9yX2ZsYWcgPSAwOwogICAgaW50IGludDEsaW50MixpbnQzLGludDQ7CiAgICB1MTYgcG9zOwogICAgaWYocG9zID0gc3RyX2NvbnRhaW5fc3RyKChjaGFyICopdWFydF9yZWNlaXZlX2J1ZiwgIiREUlMhIiksIHBvcykgewogICAgICAgIFNlcmlhbC5wcmludGxuKCIkRFJTISIpOwogICAgfSBlbHNlIGlmKHBvcyA9IHN0cl9jb250YWluX3N0cigoY2hhciAqKXVhcnRfcmVjZWl2ZV9idWYsICIkUlNUISIpLCBwb3MpIHsKICAgICAgICByZXNldEZ1bmMoKTsKICAgIH0gZWxzZSBpZihwb3MgPSBzdHJfY29udGFpbl9zdHIoKGNoYXIgKil1YXJ0X3JlY2VpdmVfYnVmLCAiJERTVCEiKSwgcG9zKSB7CiAgICAgICAgU2VyaWFsLnByaW50bG4oIiMyNTVQRFNUISIpOwogICAgICAgIGZvcihpbnQgaTtpPFNFUlZPX05VTTtpKyspIHsKICAgICAgICAgIHNlcnZvX2RvW2ldLmFpbSA9IHNlcnZvX2RvW2ldLmN1cjsKICAgICAgICB9CiAgICAgICAgZ3JvdXBfZG9fb2sgID0gMTsKICAgICAgICBTZXJpYWwucHJpbnRsbigiQERvU3RvcCEiKTsKICAgIH1lbHNlIGlmKHBvcyA9IHN0cl9jb250YWluX3N0cigoY2hhciAqKXVhcnRfcmVjZWl2ZV9idWYsICIkRFNUOiIpLCBwb3MpIHsKICAgICAgaWYoc3NjYW5mKHVhcnRfcmVjZWl2ZV9idWYsICIkRFNUOiVkISIsICZpbnQxKSkgewogICAgICAgIAlzZXJ2b19kb1tpbnQxXS5haW0gPSBzZXJ2b19kb1tpbnQxXS5jdXI7CgkJfQogICAgICBTZXJpYWwucHJpbnRsbigiQERvU3RvcCEiKTsKICAgIH1lbHNlIGlmKHBvcyA9IHN0cl9jb250YWluX3N0cigoY2hhciAqKXVhcnRfcmVjZWl2ZV9idWYsICIkQk9OISIpLCBwb3MpIHsKICAgICAgYmVlcF9vbigpOwogICAgfWVsc2UgaWYocG9zID0gc3RyX2NvbnRhaW5fc3RyKChjaGFyICopdWFydF9yZWNlaXZlX2J1ZiwgIiRCT0ZGISIpLCBwb3MpIHsKICAgICAgYmVlcF9vZmYoKTsKICAgIH0gZWxzZSBpZihzc2NhbmYodWFydF9yZWNlaXZlX2J1ZiwgIiREQ1I6JWQsJWQhIiwgJmludDIsICZpbnQzKSkgewogICAgICAgIGNhcl9ydW4oaW50MixpbnQzKTsKICAgIH0gZWxzZSBpZihwb3MgPSBzdHJfY29udGFpbl9zdHIoKGNoYXIgKil1YXJ0X3JlY2VpdmVfYnVmLCAiJFBURzoiKSwgcG9zKSB7CiAgICAgICAgaWYoc3NjYW5mKHVhcnRfcmVjZWl2ZV9idWYsICIkUFRHOiVkLSVkISIsICZpbnQxLCAmaW50MikpIHsKICAgICAgICAgICAgU2VyaWFsLnByaW50bG4oRigiWW91ciBBY3Rpb246IikpOwogICAgICAgICAgICBtZW0uYmVnaW4oX1cyNVE2NCxTUEksU1MpOwogIAkJICBmb3IoaW50IGk9aW50MTsgaTw9aW50MjsgaSsrKSB7CiAgICAgICAgICAgIG1lbS5yZWFkKCh1bnNpZ25lZCBsb25nKWkqQUNUSU9OX1NJWkUsIHVhcnRfcmVjZWl2ZV9idWYsIFJFQ1ZfU0laRS0xKTsKIAkJCSAgaWYodWFydF9yZWNlaXZlX2J1ZlswXSA9PSAneycgJiYgdWFydF9yZWNlaXZlX2J1ZlsxXSA9PSAnRycpIHsKCQkJCQlTZXJpYWwucHJpbnRsbigoY2hhciAqKXVhcnRfcmVjZWl2ZV9idWYpOwoJCQkgIH0gZWxzZSB7CiAJCQkJCXNwcmludGYodWFydF9yZWNlaXZlX2J1ZiwgIkBOb0dyb3VwICVkISIsIGkpOwogIAkJCVNlcmlhbC5wcmludGxuKChjaGFyICopdWFydF9yZWNlaXZlX2J1Zik7CiAgICAJCSAgfQogICAgCQkgIGRlbGF5KDEwKTsKICAgICAgICAgfQogICAgICAgICBtZW0uZW5kKCk7CiAgICAgICB9CiAgICB9IGVsc2UgaWYocG9zID0gc3RyX2NvbnRhaW5fc3RyKChjaGFyICopdWFydF9yZWNlaXZlX2J1ZiwgIiRER1Q6IiksIHBvcykgewogICAgICAgIGlmKHNzY2FuZih1YXJ0X3JlY2VpdmVfYnVmLCAiJERHVDolZC0lZCwlZCEiLCAmaW50MSwgJmludDIsICZpbnQzKSkgewogICAgICAgICAgICBncm91cF9udW1fc3RhcnQgPSBpbnQxOwogICAgICAgICAgICBncm91cF9udW1fZW5kID0gaW50MjsKICAgICAgICAgICAgZ3JvdXBfbnVtX3RpbWVzID0gaW50MzsKICAgICAgICAgICAgZG9fdGltZSA9IGludDM7CiAgICAgICAgICAgIGRvX3N0YXJ0X2luZGV4ID0gaW50MTsKCQkJICBpZihpbnQxID09IGludDIpIHsKCQkJCSAgZG9fZ3JvdXBfb25jZShpbnQxKTsKCQkJICB9IGVsc2UgewogICAgICAgICAgICAJICBncm91cF9kb19vayA9IDA7CgkJCSAgfQogICAgICAgIAl9CiAgICB9CgllbHNlIGlmKHBvcyA9IHN0cl9jb250YWluX3N0cigoY2hhciAqKXVhcnRfcmVjZWl2ZV9idWYsICIkS01TOiIpLCBwb3MpIHsKCQlpZihzc2NhbmYoKGNoYXIgKil1YXJ0X3JlY2VpdmVfYnVmLCAiJEtNUzolZCwlZCwlZCwlZCEiLCAmaW50MSwgJmludDIsICZpbnQzLCAmaW50NCkpIHsKCQkJU2VyaWFsLnByaW50bG4oIlRyeSB0byBmaW5kIGJlc3QgcG9zOiIpOwoJCQlpZihraW5lbWF0aWNzX21vdmUoaW50MSwgaW50MiwgaW50MywgaW50NCkpIHsKCQkJCWJlZXBfb24oKTtkZWxheSg1MCk7YmVlcF9vZmYoKTtkZWxheSg1MCk7CgkJCX0gZWxzZSB7CgkJCQliZWVwX29uKCk7ZGVsYXkoNTApO2JlZXBfb2ZmKCk7ZGVsYXkoNTApOwoJCQkJYmVlcF9vbigpO2RlbGF5KDUwKTtiZWVwX29mZigpO2RlbGF5KDUwKTsKCQkJCVNlcmlhbC5wcmludGxuKCJDYW4gbm90IGZpbmQgYmVzdCBwb3MhISEiKTsKCQkJfQoJCX0KCX0KCWVsc2UgaWYocG9zID0gc3RyX2NvbnRhaW5fc3RyKChjaGFyICopdWFydF9yZWNlaXZlX2J1ZiwgIiRHRVRBISIpLCBwb3MpIHsKICAgICAgICBkb3duTG9hZCA9IHRydWU7CiAgICAgICAgZG93bkxvYWRTeXN0aWNrTXMgPSBtaWxsaXMoKTsKICAgICAgICBTZXJpYWwucHJpbnRsbihGKCJBIikpOwogICAgfSAgZWxzZSB7CiAgICB9Cn0KCi8v5b6q546v5omn6KGM5Yqo5L2c57uECnZvaWQgbG9vcF9hY3Rpb24oKSB7CiAgc3RhdGljIGxvbmcgbG9uZyBzeXN0aWNrX21zX2JhayA9IDA7CiAgICBpZihncm91cF9kb19vayA9PSAwKSB7CiAgICAgIC8v5b6q546v5qOA5rWL5Y2V5Liq5Yqo5L2c5omn6KGM5pe26Ze05piv5ZCm5Yiw5L2NCiAgICAgIGlmKG1pbGxpcygpIC0gc3lzdGlja19tc19iYWsgPiBhY3Rpb25fdGltZSkgewogICAgICAgIHN5c3RpY2tfbXNfYmFrID0gIG1pbGxpcygpOwogICAgICAgIC8vU2VyaWFsLnByaW50bG4oZG9fc3RhcnRfaW5kZXgpOwogCQkJaWYoZ3JvdXBfbnVtX3RpbWVzICE9IDAgJiYgZG9fdGltZSA9PSAwKSB7CiAgICAgICAgICAgZ3JvdXBfZG9fb2sgPSAxOwogICAgICAgICAgU2VyaWFsLnByaW50bG4oIkBHcm91cERvbmUhIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGRvX2dyb3VwX29uY2UoZG9fc3RhcnRfaW5kZXgpOwogICAgICAgICAgaWYoZ3JvdXBfbnVtX3N0YXJ0PGdyb3VwX251bV9lbmQpIHsKICAgICAgICAgICAgaWYoZG9fc3RhcnRfaW5kZXggPT0gZ3JvdXBfbnVtX2VuZCkgewogICAgICAgICAgICAgIGRvX3N0YXJ0X2luZGV4ID0gZ3JvdXBfbnVtX3N0YXJ0OwogICAgICAgICAgICAgIGlmKGdyb3VwX251bV90aW1lcyAhPSAwKSB7CiAgICAgICAgICAgICAgICBkb190aW1lLS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb19zdGFydF9pbmRleCsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYoZG9fc3RhcnRfaW5kZXggPT0gZ3JvdXBfbnVtX2VuZCkgewogICAgICAgICAgICAgIGRvX3N0YXJ0X2luZGV4ID0gZ3JvdXBfbnVtX3N0YXJ0OwogICAgICAgICAgICAgIGlmKGdyb3VwX251bV90aW1lcyAhPSAwKSB7CiAgICAgICAgICAgICAgICBkb190aW1lLS07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBkb19zdGFydF9pbmRleC0tOwogICAgICAgICAgfQogICAgICB9CiAgfSBlbHNlIHsKICAgICAgYWN0aW9uX3RpbWUgPSAxMDsKICB9Cn0KCi8v5omn6KGM5Yqo5L2c57uE5Y2V5qyhCnZvaWQgZG9fZ3JvdXBfb25jZShpbnQgaW5kZXgpIHsKICBzdGF0aWMgbG9uZyBsb25nIHN5c3RpY2tfbXNfYmFrID0gMDsKICBpbnQgbGVuOwogIC8v6K+75Y+W5Yqo5L2cCiAgbWVtLmJlZ2luKF9XMjVRNjQsU1BJLFNTKTsKICBtZW0ucmVhZCgodW5zaWduZWQgbG9uZylpbmRleCpBQ1RJT05fU0laRSwgdWFydF9yZWNlaXZlX2J1ZiwgUkVDVl9TSVpFLTEpOwoKICAvL+iOt+WPluaXtumXtAoJYWN0aW9uX3RpbWUgPSBnZXRNYXhUaW1lKHVhcnRfcmVjZWl2ZV9idWYpOwogIHBhcnNlX2FjdGlvbih1YXJ0X3JlY2VpdmVfYnVmKTsKICBtZW0uZW5kKCk7Cn0KCi8v5omn6KGM5Yqo5L2c57uE5aSa5qyhIOWPqumAgueUqOS6juaAu+e6v+iIteacugp2b2lkIGRvX2dyb3Vwc190aW1lcyhpbnQgc3QsIGludCBlZCwgaW50IHRtKSB7CglpbnQgbXlzdCA9IHN0LCBteWVkID0gZWQsIG15dG0gPSB0bTsKCWlmKHRtPD0wKXJldHVybjsKCXdoaWxlKG15dG0pIHsKCQlmb3IoaW50IGk9bXlzdDtpPD1teWVkO2krKykgewoJCQlkb19ncm91cF9vbmNlKGkpOwoJCQlkZWxheShhY3Rpb25fdGltZSk7CgkJfQoJCW15dG0gLS07CgkJaWYobXl0bSkgewoJCQlteXN0ID0gc3Q7CgkJCW15ZWQgPSBlZDsKCQl9Cgl9Cn0KLy/kuLLlj6PkuK3mlq0Kdm9pZCBzZXJpYWxFdmVudCgpIHsKICAgIHN0YXRpYyBjaGFyIHNidWZfYmFrOwogICAgd2hpbGUoU2VyaWFsLmF2YWlsYWJsZSgpKSAgeyAgICAgIC8vCiAgICAgICAgc2J1Zl9iYWsgPSBjaGFyKFNlcmlhbC5yZWFkKCkpOwoKICAgICAgICBpZih1YXJ0MV9nZXRfb2spIHJldHVybjsKICAgICAgICBpZih1YXJ0MV9tb2RlID09IDApIHsKICAgICAgICAgIGlmKHNidWZfYmFrID09ICc8JykgewogICAgICAgICAgICB1YXJ0MV9tb2RlID0gNDsKICAgICAgICAgICAgZG93bkxvYWRTeXN0aWNrTXMgPSBtaWxsaXMoKTsKCQkJICBkb3duTG9hZCA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgaWYoc2J1Zl9iYWsgPT0gJ3snKSB7CiAgICAgICAgICAgIHVhcnQxX21vZGUgPSAzOwogICAgICAgICAgfSBlbHNlIGlmKHNidWZfYmFrID09ICckJykgewogICAgICAgICAgICB1YXJ0MV9tb2RlID0gMTsKICAgICAgICAgIH0gZWxzZSBpZihzYnVmX2JhayA9PSAnIycpIHsKICAgICAgICAgICAgdWFydDFfbW9kZSA9IDI7CiAgICAgICAgICB9CiAgICAgICAgICB1YXJ0X3JlY2VpdmVfc3RyID0gIiI7CiAgICAgICAgfQoKICAgICAgICB1YXJ0X3JlY2VpdmVfc3RyICArPSBzYnVmX2JhazsKCiAgICAgICAgaWYoKHVhcnQxX21vZGUgPT0gNCkgJiYgKHNidWZfYmFrID09ICc+JykpewogICAgICAgICAgdWFydDFfZ2V0X29rID0gMTsKICAgICAgICB9IGVsc2UgaWYoKHVhcnQxX21vZGUgPT0gMykgJiYgKHNidWZfYmFrID09ICd9JykpewogICAgICAgICAgdWFydDFfZ2V0X29rID0gMTsKICAgICAgICB9IGVsc2UgaWYoKHVhcnQxX21vZGUgPT0gMSkgJiYgKHNidWZfYmFrID09ICchJykpewogICAgICAgICAgdWFydF9yZWNlaXZlX3N0cl9iYWsgPSB1YXJ0X3JlY2VpdmVfc3RyOwogICAgICAgICAgdWFydDFfZ2V0X29rID0gMTsKICAgICAgICB9IGVsc2UgaWYoKHVhcnQxX21vZGUgPT0gMikgJiYgKHNidWZfYmFrID09ICchJykpewogICAgICAgICAgdWFydF9yZWNlaXZlX3N0cl9iYWsgPSB1YXJ0X3JlY2VpdmVfc3RyOwogICAgICAgICAgdWFydDFfZ2V0X29rID0gMTsKICAgICAgICB9CgogICAgICAgIGlmKHVhcnRfcmVjZWl2ZV9zdHIubGVuZ3RoKCkgPj0gUkVDVl9TSVpFKSB7CiAgICAgICAgICAgIHVhcnRfcmVjZWl2ZV9zdHIgPSAiIjsKICAgICAgICB9CiAgICB9Cn0KCnZvaWQgc2V0X3NlcnZvKGludCBtaW5kZXgsIGludCBtcHdtLCBpbnQgbXRpbWUpIHsKCXNlcnZvX2RvW21pbmRleF0uYWltID0gbXB3bTsKCXNlcnZvX2RvW21pbmRleF0udGltZTEgPSBtdGltZTsKCXNlcnZvX2RvW21pbmRleF0uaW5jID0gKHNlcnZvX2RvW21pbmRleF0uYWltIC0gIHNlcnZvX2RvW21pbmRleF0uY3VyKSAvIChzZXJ2b19kb1ttaW5kZXhdLnRpbWUxLzIwLjAwMCk7CglzcHJpbnRmKChjaGFyICopY21kX3JldHVybiwgIiMlMDNkUCUwNGRUJTA0ZCEgIiwgbWluZGV4LCBtcHdtLCBtdGltZSk7CglTZXJpYWwucHJpbnQoY21kX3JldHVybik7CgkvL1NlcmlhbC5wcmludGxuKGtpbmVtYXRpY3Muc2Vydm9fYW5nbGVbbWluZGV4XSk7Cn0KCi8vIOWkhOeQhuS4suWPo+aOpeaUtueahOaVsOaNrgp2b2lkIEFJX3BhcnNlX2NtZCgpIHsKICBpZiAoU3RyaW5nKHVhcnRfcmVjZWl2ZV9zdHJfYmFrKS5sZW5ndGgoKSkgewogICAgdWFydF9yZWNlaXZlX3N0cl9iYWsgPSAiIjsgLy/mlbDmja7muIXpm7YKCiAgfQp9Cgp2b2lkIHNldHVwKCl7CiAgLy9raW5lbWF0aWNzIEwwIEwxIEwyIEwzCnNldHVwX2tpbmVtYXRpY3MoMTU5LCAxMDUsIDc1LCAxODUsICZraW5lbWF0aWNzKTsKICBTZXJpYWwuYmVnaW4oMTE1MjAwKTsKICBzZXR1cF93MjVxKCk7IAkJCQkvL+ivu+WPluWFqOWxgOWPmOmHjwoJc2V0dXBfbmxlZCgpOyAgCQkJCS8vbGVk54Gv6Zeq54OB5Yid5aeL5YyWCglzZXR1cF9iZWVwKCk7ICAJCQkJLy/onILpuKPlmajliJ3lp4vljJYKCXNldHVwX3N0YXJ0X3ByZV9jbWQoKTsgIAkvL+ezu+e7n+WQr+WKqAoKICBmb3IoaW50IGk9MDtpPDM7aSsrKSB7CiAgCQliZWVwX29uKCk7CiAgCQlkZWxheSgxMDApOwogIAkJYmVlcF9vZmYoKTsKICAJCWRlbGF5KDEwMCk7CiAgfWRlbGF5KDUwMCk7Cn0KCnZvaWQgbG9vcCgpewogIC8vIOW+qui/uSBTMVxu6LaF5aOw5rOiIFMzCgogICAgbG9vcF9ubGVkKCk7ICAgIC8v5YiH5o2iTEVE54Gv54q25oCB5a6e546wTEVE54Gv6Zeq54OBCiAgICBsb29wX3VhcnQoKTsgICAgLy/op6PmnpDkuLLlj6PmjqXmlLbliLDnmoTlrZfnrKbkuLLmjIfku6QKICAgIGxvb3BfYWN0aW9uKCk7ICAvL+W+queOr+aJp+ihjOaYr+WQpumcgOimgeivu+WPluaVsOaNruaJp+ihjOWKqOS9nOe7hAogICAgaWYoZG93bkxvYWQpcmV0dXJuOwogICAgQUlfcGFyc2VfY21kKCk7Cgp9</code>